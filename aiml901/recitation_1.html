<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Recitation 1 | Sébastien Martin </title> <meta name="author" content="Sébastien Martin"> <meta name="description" content="The academic personal website of Sébastien Martin. "> <meta name="keywords" content="academic-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?85942da95a6a13aaf15248a426551986"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sebastienmartin.info/aiml901/recitation_1.html"> <script src="/assets/js/theme.js?04381d0b351f8b7d59e7eca563b4c15e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="aiml901-body sticky-bottom-footer"> <div class="aiml901-main container py-5"> <div class="post aiml901-page"> <header class="aiml901-hero"> <div class="aiml901-hero__top"> <p class="aiml901-hero__label">AIML 901</p> <button id="light-toggle" class="aiml901-hero__toggle" title="Change theme"> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </div> <h1 class="aiml901-hero__title">Recitation 1</h1> <p class="aiml901-hero__meta">Alex Jensen</p> </header> <article class="aiml901-content"> <h2 id="youll-need">You’ll Need…</h2> <ol> <li>OpenAI connection</li> <li>Google account for the class; we will use Google Calendar.</li> <li>Telegram account</li> </ol> <p>You can get connected <a href="access_instructions">here</a>.</p> <hr> <p>In this recitation, we will build two projects using <a href="https://aiml901-martin.app.n8n.cloud/" rel="external nofollow noopener" target="_blank">n8n</a>:</p> <ol> <li>A <strong>customizable chatbot</strong> powered by ChatGPT.</li> <li>A <strong>Google Calendar assistant</strong> that can add, update, and delete events by sending a text message through Telegram</li> </ol> <hr> <h2 id="learning-objectives">Learning Objectives</h2> <ul> <li>Learn the basics of <strong>nodes</strong> and <strong>connections</strong> in n8n.</li> <li>See the power of <strong>system prompting</strong> (controlling the “voice” of an AI).</li> <li>Understand the difference between a simple <strong>LLM chain</strong> and a full <strong>AI Agent</strong> with tools.</li> <li>See an example of how we can create value using AI.</li> </ul> <hr> <h1 id="part-1-nodes-and-triggers">Part 1: Nodes and Triggers</h1> <p>Let’s get logged in to <a href="https://aiml901-martin.app.n8n.cloud/home/workflows" rel="external nofollow noopener" target="_blank">n8n</a>. Once you do so, watch this brief video that introduces some basic terminology and shows you the n8n interface:</p> <figure class="aiml901-video"> <div class="aiml901-video__wrapper"> <iframe src="https://www.youtube.com/embed/LktPqqbnbRM" title="n8n YouTube video" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe> </div> <figcaption>n8n YouTube video</figcaption> </figure> <p>In n8n, we will be making workflows.</p> <ul> <li>A <strong>workflow</strong> is a series of connected tasks that can automate a process. <ul> <li>Workflows consist of <strong>triggers, nodes, and connections</strong> </li> </ul> </li> <li> <strong>Triggers</strong> (or trigger nodes) tell us when the workflow should start. This can occur when we hit execute workflow, send a message, receive an email, or more.</li> <li> <strong>Nodes</strong> each perform a specific task, such as manipulating data, sending an email, or reading a calendar.</li> <li> <strong>Connections</strong> tell n8n in what order we want these operations to occur and how our information should flow through the workflow. Think of it like a process flow chart, with our unit of flow being our information.</li> </ul> <hr> <h1 id="part-2-customizable-chatbot">Part 2: Customizable Chatbot</h1> <p>Now, we will show you an introductory workflow and build a chatbot.</p> <hr> <h3 id="step-1-trigger-listening-for-chat-message">Step 1. Trigger: Listening for Chat Message</h3> <ul> <li>Every workflow in n8n starts with a type of trigger that initiates the workflow. We will start our workflow when certain types of Slack messages are sent.</li> <li> <strong>Add node:</strong> <code class="language-plaintext highlighter-rouge">On chat message</code> </li> <li> <strong>What it does:</strong> Listens for chat messages within n8n. You should see a chat box at the bottom of your screen. If you do not, there should be a little arrow at the bottom right to expand a bottom menu.</li> <li> <strong>Why this matters:</strong> Without a trigger, nothing starts. This lets us send messages to what will be our chatbot, which begins the workflow. This example gives us a simple interface for testing before connecting to external apps.</li> </ul> <p>Try sending a chat message and see how it executes. Clicking into the node, you will see a sessionId, the action “sendMessage,” and your message (called chatInput).</p> <hr> <h3 id="step-2-processing-chatgpt-response">Step 2. Processing: ChatGPT Response</h3> <p>Next, we want to send our message to an LLM.</p> <ul> <li> <strong>Add node:</strong> <code class="language-plaintext highlighter-rouge">Basic LLM Chain</code> (Chat GPT Response) <ul> <li><strong>Prompt (User Message):</strong></li> </ul> </li> </ul> <pre><code class="language-JSON">{{ $json.chatInput }}
</code></pre> <ul> <li> <strong>Add node:</strong> under the Basic LLM Chain, click the <code class="language-plaintext highlighter-rouge">+</code> for the model and choose <code class="language-plaintext highlighter-rouge">OpenAI Chat Model</code> <ul> <li>This tells us what model we are going to call, the “brains” of our LLM. For now, let’s just use <code class="language-plaintext highlighter-rouge">gpt-5</code>.</li> <li>Set the credential to connect with to be your OpenAI account.</li> </ul> </li> </ul> <p>Connect our chat trigger to the Basic LLM Chain and send a message. This returns something that is pretty clearly just ChatGPT. However, we have much more control in n8n!</p> <hr> <h3 id="step-3--customizing-the-response">Step 3. Customizing the Response</h3> <p>We will add a <strong>system prompt</strong> that allows us to personalize our GPT. A system prompt is a set of instructions that is also sent to the LLM every time that we send a message.</p> <p>Click into the Basic LLM Chain node. Under <code class="language-plaintext highlighter-rouge">Chat Messages (if Using a Chat Model)</code>, click <code class="language-plaintext highlighter-rouge">Add prompt</code> and for <code class="language-plaintext highlighter-rouge">Type Name or ID</code>, choose <code class="language-plaintext highlighter-rouge">System</code>. Then, copy in this prompt:</p> <div class="language-text highlighter-rouge"><div class="highlight"><details class="aiml901-code-collapse" data-line-count="12"><summary class="aiml901-code-collapse__summary" data-show-label="Show code (12 lines)" data-hide-label="Hide code" data-line-count="12">Show code (12 lines)</summary><div class="aiml901-code-collapse__body"><pre class="highlight"><code>You are a cowboy philosopher who teaches using the Socratic method. Always respond in a folksy, cowboy-like manner, with colloquial Western language, metaphors, and imagery (horses, trails, saloons, dusty roads, ranch life, etc.). Your role is not to give direct answers, but to ask probing, thoughtful questions that guide the other person toward realizin’ the truth for themselves. Stay curious, never condescending. Keep the tone friendly, rustic, and wise, as if you’re sittin’ ‘round a campfire under the stars.
	
	- Always answer with questions, not direct solutions.
    - Use cowboy idioms and imagery while still keeping your questions sharp and logical.
    - Encourage reflection by drawin’ parallels to life on the frontier.
    - Avoid modern slang or technical jargon—stick to cowboy-style plain speech.
    
    Example style:
    
    Instead of saying "Yes, that’s correct", say "Well partner, what makes ya reckon that’s the right trail to ride down?"
    
    Instead of saying "The answer is X", say "Suppose ya took the north trail instead of the south—what do ya figure might happen then?"
</code></pre></div></details></div></div> <p>Send a chat message asking for the difference between correlation and causation.</p> <hr> <h2 id="part-2-exercises">Part 2 Exercises:</h2> <ol> <li> <strong>Tone:</strong> Change the system prompt so the bot acts like a pirate. What types of words should it use?</li> <li> <strong>Wording:</strong> Try to make the bot limit its answer to 3 words. What happens if you push it and ask multiple questions?</li> <li> <strong>Formatting:</strong> Ask the bot to answer in bullet points. Does it handle this well?</li> <li> <strong>Limitations:</strong> What happens if you ask the bot something that it doesn’t know, like your middle name?</li> </ol> <hr> <h1 id="part-3-google-calendar-agent">Part 3: Google Calendar Agent</h1> <p>Now we build something more advanced: a <strong>Calendar assistant</strong>. This shows how to go beyond a single LLM response, giving the AI the ability to actually take actions.</p> <p>We are using Google Calendar because it is easy to implement, but what we are doing here can be extended to other calendars. Microsoft Outlook’s calendar also works but has slightly fewer options, so we need to dive a bit deeper in order to have as much functionality as we would like.</p> <p>Start a new workspace and let’s get started!</p> <hr> <h3 id="step-1-trigger-telegram">Step 1. Trigger: Telegram</h3> <ul> <li> <strong>Add node:</strong> <code class="language-plaintext highlighter-rouge">On App Event → Telegram → On message</code> <ul> <li>Connect with your Telegram credential</li> <li>Click <code class="language-plaintext highlighter-rouge">Additional Fields → Restrict to User IDs</code> and put your Telegram user ID. You can find this by messaging <code class="language-plaintext highlighter-rouge">/start</code> to userinfobot on Telegram or going to <code class="language-plaintext highlighter-rouge">https://api.telegram.org/bot&lt;yourtoken&gt;/getUpdates</code>, replacing <code class="language-plaintext highlighter-rouge">&lt;yourtoken&gt;</code> with the bot token. This prevents other Telegram users from accessing your n8n workflow through your chatbot.</li> </ul> </li> <li> <strong>What it does:</strong> This lets you receive messages from Telegram, which will ultimately make adding events to your calendar much quicker.</li> </ul> <hr> <h3 id="step-2-core-brain-ai-agent">Step 2. Core Brain: AI Agent</h3> <ul> <li> <strong>Add node:</strong> <code class="language-plaintext highlighter-rouge">AI Agent</code> <ul> <li> <strong>Prompt (User Message</strong>):</li> </ul> <pre><code class="language-JSON">  {{ $json.chatInput }}
</code></pre> </li> <li> <strong>What it does:</strong> This is different from the “LLM Chain.” The Agent can <strong>plan</strong> and <strong>choose tools.</strong> </li> <li>We will add a system message to clarify its instructions in the exercises.</li> </ul> <hr> <h3 id="step-3-connection-to-openai">Step 3. Connection to OpenAI</h3> <ul> <li> <strong>Add node:</strong> under the AI Agent, click the <code class="language-plaintext highlighter-rouge">+</code> for the chat model and choose <code class="language-plaintext highlighter-rouge">OpenAI Chat Model</code>. For the model, select <code class="language-plaintext highlighter-rouge">gpt-5</code>.</li> </ul> <hr> <h3 id="step-4-give-the-agent-a-memory">Step 4. Give the Agent a Memory</h3> <ul> <li> <strong>Add node:</strong> <code class="language-plaintext highlighter-rouge">Simple Memory</code> <ul> <li> <strong>Session ID:</strong> Define below</li> <li><strong>Session Key from Previous Node:</strong></li> </ul> </li> </ul> <pre><code class="language-JSON">{{ $('Telegram Trigger').item.json.message.chat.id }}
</code></pre> <ul> <li>Connect it to the AI Agent.</li> <li> <strong>What it does:</strong> Stores recent conversation history.</li> <li> <strong>Why this matters:</strong> Without memory, the agent forgets everything after each turn. With memory, it can follow up (“delete that soccer event I just made”).</li> </ul> <hr> <h3 id="step-5-first-tool-create-event">Step 5. First Tool: Create Event</h3> <ul> <li> <strong>Add node:</strong> Click the <code class="language-plaintext highlighter-rouge">+</code> for Tool under the AI Agent node and choose <code class="language-plaintext highlighter-rouge">Google Calendar → Create Event</code> </li> <li>Choose to connect with your Google Calendar credential and decide calendar you want to add to.</li> <li>Press the stars next to the <code class="language-plaintext highlighter-rouge">Start</code> and <code class="language-plaintext highlighter-rouge">End</code> options to let our agent decide when the event starts and ends.</li> <li>In the additional fields, add the <code class="language-plaintext highlighter-rouge">Summary</code> option and also let the agent decide this. The <code class="language-plaintext highlighter-rouge">Summary</code>is the title of the event in your calendar.</li> <li> <strong>Why this matters:</strong> This is the <em>first power</em> we give the agent—the ability to create new events.</li> </ul> <hr> <h3 id="step-6-responding-in-telegram">Step 6. Responding in Telegram</h3> <ul> <li> <strong>Add node:</strong> <code class="language-plaintext highlighter-rouge">Telegram → Send a text message</code> <ul> <li>Chat ID: your Telegram user ID</li> <li> <p>Text:</p> <pre><code class="language-JSON">  {{ $json.output }}
</code></pre> </li> </ul> </li> </ul> <p>We can make the workflow active by toggling the button in the top toolbar from Inactive to Active. This means that the workflow will actively “listen” for events; in our case, this means that it will respond each time that we send a message.</p> <hr> <h2 id="part-3-exercises">Part 3 Exercises:</h2> <p>These exercises help walk through how we should prompt our agent and then also let us add other tools that we might want to use.</p> <ol> <li>Explain in words what happens when you send a message to the agent. What does it do?</li> <li>Ask your agent to add an event tomorrow at 2 PM. What happens?</li> <li>Check what happens when you schedule an event for “tonight” or “tomorrow morning”. What time ranges are used for these events?</li> <li>We should give a default amount of time for our event. Add this to your system prompt and try Exercise 3.1 again.</li> <li> <p>Now, add the following to the system prompt for the <code class="language-plaintext highlighter-rouge">AI Agent</code> and try Exercise 3.1 again:</p> <div class="language-text highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>    Current time: {{ $now }}
</code></pre></div> </div> </li> <li>While our agent “knows” what tools are available to it (which we will discuss later), it is helpful in the system prompt to provide a description of the tools available. Update the system prompt to describe the <code class="language-plaintext highlighter-rouge">Create Event</code> tool.</li> <li>Currently, our agent only lets us add events, but we can’t delete or update this event. In order to do so, we need to get the ID of the event. Add another Google Calendar tool and choose the operation <code class="language-plaintext highlighter-rouge">Get Many</code>. <ol> <li>We can set a limit on how many events we retrieve, if your calendar is particularly full. We can also set a time frame in which to search; this can be automatically determined by our agent, as well.</li> <li>Update the system prompt to describe this new tool.</li> </ol> </li> <li>Now, on your own, add <code class="language-plaintext highlighter-rouge">Update Event</code> and <code class="language-plaintext highlighter-rouge">Delete Event</code> tools and update the system prompt to describe them. Note that you can choose what to update, such as the timing, the name of the event, and many other options. <ol> <li>Add a <strong>clarifying question rule</strong>: if the agent isn’t sure which event to delete, it should ask you first.</li> </ol> </li> </ol> <h3 id="challenges">Challenges:</h3> <ol> <li>It’s nice to be able to send a voice message in Telegram and for it to process this. Think about what steps you would need to add so that n8n can process both text and voice messages.</li> <li>Try to give your agent a multi-step command. For example, “delete the Marketing meeting today and then create a new one at 4 PM for one hour.” <ol> <li>What steps are needed? Does it complete these steps?</li> <li>If not, add instructions as necessary to make this more consistent. What works? What does not?</li> </ol> </li> <li>When we try to implement new tools, things don’t always work perfectly. For example, Google Calendar’s API handles calls to create events with and without attendees slightly differently. <ol> <li>In the <code class="language-plaintext highlighter-rouge">Create Event</code> node, under <code class="language-plaintext highlighter-rouge">Additional Fields</code>, click <code class="language-plaintext highlighter-rouge">Add Field</code> and then <code class="language-plaintext highlighter-rouge">Attendees</code> and let the model automatically define it. Now, create an event without any attendees. What happens? How can we deal with this?</li> <li>We also want to be able to update events to have attendees. How would we do this?</li> </ol> </li> </ol> <hr> <h2 id="for-the-final">For the Final:</h2> <p>The following topics may appear on the final exam:</p> <ul> <li>System prompting <ul> <li>Changing the tone of an LLM</li> <li>Providing instructions on using tools efficiently</li> </ul> </li> <li>Use of the <code class="language-plaintext highlighter-rouge">Basic LLM Chain</code> and <code class="language-plaintext highlighter-rouge">AI Agent</code> nodes, along with tools</li> <li>n8n triggers <ul> <li><code class="language-plaintext highlighter-rouge">Trigger manually</code></li> <li><code class="language-plaintext highlighter-rouge">On chat message</code></li> <li><code class="language-plaintext highlighter-rouge">Telegram → On message</code></li> </ul> </li> <li>Use of the Google Calendar tools</li> </ul> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 Sébastien Martin. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: October 21, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?5a6977fbcd9d77bc24edac6a6d7614af" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TX350FZQ6X"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TX350FZQ6X");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>